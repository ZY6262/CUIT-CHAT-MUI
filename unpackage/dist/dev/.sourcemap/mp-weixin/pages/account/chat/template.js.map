{"version":3,"sources":["webpack:///E:/H5Plus/beautiful/main.js","webpack:///E:/H5Plus/beautiful/pages/account/chat/template.vue?8d14","webpack:///E:/H5Plus/beautiful/pages/account/chat/template.vue?23be","webpack:///E:/H5Plus/beautiful/pages/account/chat/template.vue?4003","webpack:///E:/H5Plus/beautiful/pages/account/chat/template.vue?f996","webpack:///E:/H5Plus/beautiful/pages/account/chat/template.vue","webpack:///E:/H5Plus/beautiful/pages/account/chat/template.vue?ee0f","webpack:///E:/H5Plus/beautiful/pages/account/chat/template.vue?62b5"],"names":["createPage","Page","recorderManager","uni","getRecorderManager","innerAudioContext","createInnerAudioContext","autoplay","data","fastdfsUrl","metadata","InputBottom","showAudio","showInput","startAudio","audioing","playAudio","showText","chatRecordList","friend","inputMsg","voicePath","watch","val","console","log","changeScrollTop","computed","myId","$store","state","user","id","faceImg","methods","toAudio","toText","toAudioing","start","toEndAudio","stop","playSound","src","play","playAudioRecord","e","currentTarget","uploadImg","_this","chooseImage","count","sizeType","sourceType","success","res","JSON","stringify","tempFilePaths","messageService","uploadMultiMsg","guid","sendUserId","fail","showToast","icon","position","title","lookPic","path","param","name","img_src","img_num","navigateTo","url","encodeURIComponent","InputFocus","detail","height","InputBlur","switchType","refreshRecordsList","sendText","undefined","duration","Record","sendTextMsg","S4","Math","random","toString","substring","selector","createSelectorQuery","select","boundingClientRect","pageScrollTo","scrollTop","top","bottom","exec","onLoad","parse","condition","recordsPlus","getChatMsgRecords","$on","onStop","tempFilePath","onShow","snapshotShowTmp","getChatSnapshot","i","length","isSender","senderId","isRead","badge","setChatSnapshot","$emit"],"mappings":"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","file":"pages/account/chat/template.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/account/chat/template.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./template.vue?vue&type=template&id=ede57de8&\"\nvar renderjs\nimport script from \"./template.vue?vue&type=script&lang=js&\"\nexport * from \"./template.vue?vue&type=script&lang=js&\"\nimport style0 from \"./template.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\浏览器下载目录\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('ede57de8')) {\n      api.createRecord('ede57de8', component.options)\n    } else {\n      api.reload('ede57de8', component.options)\n    }\n    module.hot.accept(\"./template.vue?vue&type=template&id=ede57de8&\", function () {\n      api.rerender('ede57de8', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"H5Plus/beautiful/pages/account/chat/template.vue\"\nexport default component.exports","export * from \"-!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./template.vue?vue&type=template&id=ede57de8&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./template.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./template.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nimport metadata from '../../../utils/metadata.js'\nimport recordsPlus from '../../../store/chatmsgrecordsplus.js'\nimport Record from '../../../common/RecordModel.js'\nimport messageService from '../../../service/MessageService.js'\n\nconst recorderManager = uni.getRecorderManager();\nconst innerAudioContext = uni.createInnerAudioContext();\ninnerAudioContext.autoplay = true;\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tfastdfsUrl: metadata.fastdfsUrl,\n\t\t\tInputBottom: 0,\n\t\t\tshowAudio: true,\n\t\t\tshowInput: true,\n\t\t\tstartAudio: false,\n\t\t\taudioing: false,\n\t\t\tplayAudio: false,\n\t\t\tshowText: false,\n\t\t\tchatRecordList: [],\n\t\t\tfriend: {},\n\t\t\tinputMsg: '',\n\t\t\tvoicePath: ''\n\t\t};\n\t},\n\twatch: {\n\t\tchatRecordList(val) {\n\t\t\tconsole.log('聊天记录发生了变化')\n\t\t\tthis.changeScrollTop()\n\t\t}\n\t},\n\tcomputed: {\n\t\tmyId(){\n\t\t\treturn this.$store.state.user.id\n\t\t},\n\t\tfaceImg(){\n\t\t\treturn this.$store.state.user.faceImg\n\t\t}\n\t},\n\tmethods: {\n\t\ttoAudio(){\n\t\t\tthis.showInput = false\n\t\t\tthis.audioing = false\n\t\t\tthis.playAudio = false\n\t\t\tthis.showAudio = false\n\t\t\tthis.showText = true\n\t\t\tthis.startAudio = true\n\t\t},\n\t\ttoText(){\n\t\t\tthis.showText = false\n\t\t\tthis.startAudio = false\n\t\t\tthis.playAudio = false\n\t\t\tthis.audioing = false\n\t\t\tthis.showAudio = true\n\t\t\tthis.showInput = true\n\t\t},\n\t\ttoAudioing(){\n\t\t\tthis.showText = true\n\t\t\tthis.startAudio = false\n\t\t\tthis.playAudio = false\n\t\t\tthis.audioing = true\n\t\t\tthis.showAudio = false\n\t\t\tthis.showInput = false\n\t\t\trecorderManager.start();\n\t\t},\n\t\ttoEndAudio(){\n\t\t\tthis.showText = true\n\t\t\tthis.startAudio = true\n\t\t\tthis.playAudio = false\n\t\t\tthis.audioing = false\n\t\t\tthis.showAudio = false\n\t\t\tthis.showInput = false\n\t\t\trecorderManager.stop();\n\t\t},\n\t\tplaySound(){\n\t\t\tconsole.log('播放录音');\n\t\t\n\t\t\tif (this.voicePath) {\n\t\t\t\t// innerAudioContext.src = this.voicePath;\n\t\t\t\tinnerAudioContext.src = 'https://img-cdn-qiniu.dcloud.net.cn/uniapp/audio/music.mp3'\n\t\t\t\tinnerAudioContext.play();\n\t\t\t}\n\t\t},\n\t\tplayAudioRecord(e){\n\t\t\tconsole.log('点击播放按钮')\n\t\t\tconsole.log(e)\n\t\t\tthis.voicePath = e.currentTarget.id\n\t\t\tconsole.log(this.voicePath)\n\t\t\tif (this.voicePath) {\n\t\t\t\t// innerAudioContext.src = this.voicePath;\n\t\t\t\tinnerAudioContext.src = this.fastdfsUrl + this.voicePath\n\t\t\t\tinnerAudioContext.play();\n\t\t\t}\n\t\t\t\n\t\t},\n\t\tuploadImg(){\n\t\t\tlet _this = this\n\t\t\tuni.chooseImage({\n\t\t\t    count: 1, //默认9\n\t\t\t    sizeType: ['original'], //可以指定是原图还是压缩图，默认二者都有\n\t\t\t    sourceType: ['album', 'camera'],\n\t\t\t    success: function (res) {\n\t\t\t        console.log(JSON.stringify(res.tempFilePaths));\n\t\t\t\t\tconsole.log(res.tempFilePaths)\n\t\t\t\t\tmessageService.uploadMultiMsg(res.tempFilePaths[0], _this.guid(), _this.friend.sendUserId, 'image', _this)\n\t\t\t    },\n\t\t\t\tfail: function(res) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ticon: 'none',\n\t\t\t\t\t\tposition: 'top',\n\t\t\t\t\t\ttitle: '发送的文件过大'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tlookPic(e){\n\t\t\tconsole.log('查看大图')\n\t\t\tlet path = e.currentTarget.id\n\t\t\tlet param = {}\n\t\t\tparam.id = path\n\t\t\tparam.title = '查看大图'\n\t\t\tparam.name = '图片'\n\t\t\tparam.img_src = this.fastdfsUrl + path\n\t\t\tparam.img_num = 1\n\t\t\tuni.navigateTo({\n\t\t\t\turl: '../../img/betterdetails?data=' + encodeURIComponent(JSON.stringify(param))\n\t\t\t})\n\t\t},\n\t\tInputFocus(e) {\n\t\t\tthis.InputBottom = e.detail.height\n\t\t},\n\t\tInputBlur(e) {\n\t\t\tthis.InputBottom = 0\n\t\t},\n\t\tswitchType(){\n\t\t\tthis.audioing = !this.audioing\n\t\t},\n\t\trefreshRecordsList(){\n\t\t\t\n\t\t},\n\t\tsendText(){\n\t\t\tif (this.inputMsg == '' || this.inputMsg == null || this.inputMsg == undefined) {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tposition: 'top',\n\t\t\t\t\tduration: 3000,\n\t\t\t\t\ttitle: '发送的消息为空'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tlet res = new Record(this.guid(), this.$store.state.user.id, this.friend.sendUserId, this.inputMsg, 'text', true, true)\n\t\t\tconsole.log(res)\n\t\t\tmessageService.sendTextMsg(res, this)\n\t\t\t\n\t\t},\n\t\t//用于生成msgId\n\t\tS4() {\n\t\t\treturn (((1+Math.random())*0x10000)|0).toString(16).substring(1);\n\t\t},\n\t\tguid() {\n\t\t\treturn (this.S4() + this.S4() + this.S4() + this.S4() + this.S4() + this.S4() + this.S4() + this.S4());\n\t\t},\n\t\tchangeScrollTop(){\n\t\t\tconsole.log('更新scrollTop值')\n\t\t\tlet selector = uni.createSelectorQuery()\n\t\t\tselector.select('#chatList').boundingClientRect(data => {\n\t\t\t  uni.pageScrollTo({\n\t\t\t  \tduration: 0,\n\t\t\t\tscrollTop: data.top + data.bottom\n\t\t\t  })\n\t\t\t}).exec();\n\t\t}\n\t}, \n\tonLoad(e){\n\t\tconsole.log('聊天页面Load事件')\n\t\tlet _this = this\n\t\tthis.friend = JSON.parse(e.condition)\n\t\tlet myId = this.$store.state.user.id\n\n\n\n\n\t\tthis.chatRecordList = recordsPlus.getChatMsgRecords(myId, this.friend.sendUserId)\n\t\tuni.$on('refreshRecordsList', function(res){\n\t\t\tconsole.log('接收到 了刷新事件')\n\t\t\t_this.chatRecordList = recordsPlus.getChatMsgRecords(myId, _this.friend.sendUserId)\n\t\t\tconsole.log(_this.chatRecordList)\n\t\t});\n\t\tconsole.log(this.chatRecordList)\n\t\trecorderManager.onStop(function (res) {\n\t\t\tconsole.log('recorder stop' + JSON.stringify(res));\n\t\t\t// 发送语音消息\n\t\t\tmessageService.uploadMultiMsg(res.tempFilePath, _this.guid(), _this.friend.sendUserId, 'audio', _this)\n\t\t});\n\t},\n\tonShow(){\n\t\tconsole.log('聊天页面已显示')\n\t\tlet selector = uni.createSelectorQuery()\n\t\tselector.select('#chatList').boundingClientRect(data => {\n\t\t  uni.pageScrollTo({\n\t\t  \tduration: 0,\n\t\t\tscrollTop: data.top + data.bottom\n\t\t  })\n\t\t}).exec();\n\t\t// 更新下相关snapshot的badge\n\t\tconsole.log(recordsPlus)\n\t\tvar snapshotShowTmp = recordsPlus.getChatSnapshot(this.$store.state.user.id)\n\t\tconsole.log(snapshotShowTmp)\n\t\tfor(let i = 0; i < snapshotShowTmp.length; i++) {\n\t\t\tif (!snapshotShowTmp[i].isSender && (this.friend.sendUserId == snapshotShowTmp[i].senderId)) {\n\t\t\t\tsnapshotShowTmp[i].isRead = true\n\t\t\t\tsnapshotShowTmp[i].badge = 0\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tconsole.log('更新一下badge')\n\t\trecordsPlus.setChatSnapshot(this.$store.state.user.id, snapshotShowTmp)\n\t\tuni.$emit('refreshSnapShot', snapshotShowTmp)\n\t}\n}\n","import mod from \"-!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./template.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-1!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--6-oneOf-1-2!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../浏览器下载目录/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./template.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}